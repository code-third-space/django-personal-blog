<!DOCTYPE html>

{% extends 'bloggings/base.html' %}

{% block content %}

<style>
    .carousel-control-prev-icon {
        filter: invert(1);
    }
    
    .carousel-control-next-icon {
        filter:invert(1);
    }

    .carousel-item img {
        width: 720px;
        height: 450px;
        object-fit: cover;
    }
</style>

<div id="demo" class="carousel slide" date-ride="carousel">
    <div class="carousel-indicators">
        {% for blog in blog_list %}
        <button type="button" data-target="#demo"
                data-slide-to="{{ forloop.counter0 }}"
                class="{% if forloop.first %}active{% endif %}">
        </button>
        {% endfor %}
    </div>
    <div class="carousel-inner">
        {% if blog_list %}
        {% for blog in blog_list %}
        <div class="carousel-item {% if forloop.first%}active{% endif %}">
            <img src="{{ blog.picture.url }}" alt="图片" class="d-block mx-auto img-fluid">
            <div class="carousel-caption d-none d-md-block">
                <h5>{{blog.blog_title}}</h5>
            </div>
        </div>
        {% endfor %}
        {% else %}
        <p>没有知道博客</p>
        {% endif %}
    </div>
    <button class="carousel-control-prev" type="button" data-target="#demo" data-slide="prev">
        <span class="carousel-control-prev-icon"></span>
    </button>
    <button class="carousel-control-next" type="button" data-target="#demo" data-slide="next">
        <span class="carousel-control-next-icon"></span>
    </button>
</div>

<div class="container-fluid mt-3" style="margin: auto;">
    <h2 class="alert alert-primary text-center">总览</h2>
    <div class="row">
        <div class="col-md-6">
        <table class="table table-striped table-hover">
        <thead>
            <tr class="table-primary">
                <td>标题</td>
                <td>地点</td>
                <td>类型</td>
            </tr>
        </thead>
        <tbody>
        {% if blog_list %}
            {% for blog in blog_list %}
            <tr>
                <td class="text-left"
                    onmouseover="showImage('image-{{ blog.id }}')"
                    onmouseout="hideImage('image-{{ blog.id }}')">
                    <a href="/blog_detail/{{blog.id}}/" class="text-decoration-none">
                        {{blog.blog_title}}
                    </a>
                </td>
                <td class="text-warning text-center">{{ blog.city_name }}</td>
                <td class="text-success text-right">{{ blog.type_name}}</td>
            </tr>
            {% endfor %}
        {% else %}
            <tr>
                <td colspan=""> 没有可用的博客</td>
            </tr>
        {% endif %}
        </tbody>
        </table>   
        </div>
        <div class="col-md-6">
            <table class="table table-hover">
                <thead>
                    <tr class="table-primary">
                    <td>图像</td>
                    </tr>
                </thead>
                <tbody>
                {% if blog_list %}
                {% for blog in blog_list %}
                    <tr style="height: 0; display: table-row;">
                    <td style="padding: 0; border: none;">
                    {% if blog.picture %}
                    <img id="image-{{ blog.id }}" src="{{ blog.picture.url }}" alt="图片展示" 
                    style="max-width: 960px; height: 390px; display: none;">
                    {% endif %}
                    </td>
                    </tr>
                {% endfor %}
                {% endif %}
                </tbody>
            </table>
        </div>
    <script>
        function showImage(imageId) {
            var img = document.getElementById(imageId);
            if (img) {
                img.style.display = 'block';
            }
        }
        
        function hideImage(imageId) {
            var img = document.getElementById(imageId);
            if (img) {
                img.style.display = 'none';
            }
        }
    </script>
    </div>
</div>

<div class="container-fluid">
    <h2 class="alert alert-primary text-center">分类区</h2>
    <div class="row">
        <div class="col-md-6">
        <h3 class="bg-info text-center">技术 Blogs</h3>
            <table class="table table-striped table-hover">
                <thead>
                    <tr class="table-primary">
                        <td>标题</td>
                        <td>位置</td>
                        <td class="text-center">国家</td>
                    </tr>
                </thead>
                <tbody>
                {% if type_a_blogs %}
                    {% for blog in type_a_blogs  %}
                <tr>
                    <td class="text-info">
                    <a href="/blog_detail/{{blog.id}}" class="text-decoration-none">
                        {{blog.blog_title}}
                    </a>
                    </td>
                    <td class="text-success bg-transparent">{{blog.city_name}}</td>
                    <td>{{blog.countries_name}}</td>
                </tr>
                    {% endfor %}
                {% endif %}
                </tbody>
            </table>
        </div>

        <div class="col-md-6">
        <h3 class="bg-info text-center">财经 Blogs</h3>
            <table class="table table-striped table-hover">
                <thead>
                    <tr class="table-primary">
                        <td>标题</td>
                        <td>位置</td>
                        <td class="text-center">图像</td>
                    </tr>
                </thead>
                <tbody>
                    {% if type_b_blogs %}
                        {% for blog in type_b_blogs %}
                    <tr>
                        <td><a href="/blog_detail/{{blog.id}}" class="text-decoration-none">
                            {{blog.blog_title}}
                        </a>
                        </td>
                        <td class="text-success bg-transparent">{{blog.city_name}}</td>
                        <td>{{blog.countries_name}}</td>
                    </tr>
                        {% endfor %}
                    {% endif %}
                </tbody>
            </table>
        </div>
    </div>
</div>
{% endblock %}